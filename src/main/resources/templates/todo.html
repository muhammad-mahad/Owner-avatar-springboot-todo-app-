<!DOCTYPE html>
<html lang="en">
	<head>
	    <meta charset="UTF-8">
	    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	    <!-- Bootstrap CSS -->
		<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
	    <!-- Bootstrap Datepicker CSS -->
	    <link href="https://cdn.jsdelivr.net/npm/bootstrap-datepicker@1.9.0/dist/css/bootstrap-datepicker.min.css" rel="stylesheet">
		<title th:text="${title + ' Todo Page'}">${title} Todo Page</title>
	</head>
	<body>
		<nav class="navbar navbar-expand-md navbar-light bg-light mb-3 p-1">
			<a class="navbar-brand m-1" href="https://github.com/muhammad-mahad">Muhammad Mahad</a>
			<div class="collapse navbar-collapse">
				<ul class="navbar-nav">
					<li class="nav-item"><a class="nav-link" href="/">Home</a></li>
					<li class="nav-item"><a class="nav-link" href="/allTodos">Todos</a></li>
				</ul>
			</div>	
		</nav>		
		<div class="container">
			<h1>Enter Todo Details</h1>
			    <form method="post" th:object="${todo}">
        <fieldset class="mb-3">
            <label for="description">Description</label>
            <input type="text" id="description" name="description" th:field="*{description}" required="required"/>
            <div th:if="${#fields.hasErrors('description')}" th:errors="*{description}" class="text-danger"></div>
        </fieldset>

        <fieldset class="mb-3">
            <label for="localDate">Target Date</label>
            <input type="text" id="localDate" name="localDate" th:field="*{localDate}" required="required"/>
            <div th:if="${#fields.hasErrors('localDate')}" th:errors="*{localDate}" class="text-danger"></div>
        </fieldset>

        <div th:if="${title == 'Update'}">
            <fieldset class="mb-3">
                <label for="done">Is Done?</label>
                <input type="checkbox" id="done" name="done" th:field="*{done}"/>
                <span th:if="${#fields.hasErrors('done')}" th:errors="*{done}" class="text-warning"></span>
            </fieldset>
        </div>

        <input type="submit" class="btn btn-success" value="Submit" />
    </form>
		</div>
		<!-- jQuery -->
		<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
		<!-- Bootstrap JS and Popper.js (required for Bootstrap components) -->
	    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
	    <!-- Bootstrap Datepicker JS -->
	    <script src="https://cdn.jsdelivr.net/npm/bootstrap-datepicker@1.9.0/dist/js/bootstrap-datepicker.min.js"></script>
		<script>
			 // Initialize the datepicker
			$('#localDate').datepicker({
				format: 'yyyy-mm-dd', // Set the desired date format
	            todayHighlight: true,
	            autoclose: true,
	            startDate: new Date(), // Allow only today and future dates
	            endDate: null // No end date restriction
	        }); // Set today's date initially
		</script>
	</body>
</html>